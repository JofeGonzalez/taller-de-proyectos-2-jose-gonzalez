<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Finanzas Personales</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Gestor de Finanzas Personales</h1>
    </header>

    <main>
        <section id="resumen">
            <h2>Resumen</h2>
            <div>
                <span><strong>Ingresos:</strong> $<span id="totalIngresos">0</span></span>
                <span><strong>Gastos:</strong> $<span id="totalGastos">0</span></span>
                <span><strong>Saldo:</strong> $<span id="saldoDisponible">0</span></span>
            </div>
        </section>

        <section id="formulario">
            <h2>Registrar movimiento</h2>
            <form id="movimientoForm">
                <label>
                    Tipo:
                    <select id="tipo" required>
                        <option value="ingreso">Ingreso</option>
                        <option value="gasto">Gasto</option>
                    </select>
                </label>
                <label>
                    Categoría:
                    <select id="categoria" required>
                        <option value="">Seleccione</option>
                        <option value="sueldo">Sueldo</option>
                        <option value="servicios">Servicios</option>
                        <option value="telefono">Teléfono</option>
                        <option value="seguros">Seguros</option>
                        <option value="alquiler">Alquiler</option>
                        <option value="mantenimiento">Mantenimiento</option>
                        <option value="muebles">Muebles y Electro</option>
                        <option value="suscripciones">Suscripciones</option>
                        <option value="transportePrivado">Transporte Privado</option>
                        <option value="transportePublico">Transporte Público</option>
                        <option value="supermercado">Supermercado</option>
                        <option value="kiosco">Kiosco</option>
                        <option value="cuidado">Cuidado Personal</option>
                        <option value="salud">Salud</option>
                        <option value="indumentaria">Indumentaria</option>
                        <option value="ahorro">Ahorro</option>
                        <option value="inversiones">Inversiones</option>
                        <option value="imprevistos">Imprevistos</option>
                        <option value="familia">Familia</option>
                        <option value="tarjetas">Tarjetas</option>
                        <option value="educacion">Educación</option>
                        <option value="viajes">Viajes</option>
                        <option value="salidas">Salidas</option>
                        <option value="comidas">Comidas</option>
                        <option value="delivery">Delivery</option>
                        <option value="entretenimiento">Entretenimiento</option>
                        <option value="regalos">Regalos</option>
                        <option value="hobbies">Hobbies y Gustos</option>
                        <option value="oficina">Oficina</option>
                    </select>
                </label>
                <label>
                    Monto:
                    <input type="number" id="monto" step="0.01" min="0" required />
                </label>
                <label>
                    Medio de pago:
                    <select id="medioPago" required>
                        <option value="">Seleccione</option>
                        <option value="efectivo">Efectivo</option>
                        <option value="tarjetaDebito">Tarjeta Débito</option>
                        <option value="tarjetaCredito">Tarjeta Crédito</option>
                        <option value="otros">Otros</option>
                    </select>
                </label>
                <label>
                    Fecha:
                    <input type="date" id="fecha" required />
                </label>
                <label>
                    Descripción:
                    <input type="text" id="descripcion" maxlength="100" placeholder="Opcional" />
                </label>
                <button type="submit">Agregar</button>
            </form>
            <div id="mensajeFeedback" aria-live="polite"></div>
        </section>

        <section id="filtros">
            <h2>Filtrar movimientos</h2>
            <label>
                Categoría:
                <select id="filtroCategoria">
                    <option value="">Todas</option>
                    <option value="sueldo">Sueldo</option>
                    <option value="servicios">Servicios</option>
                    <option value="telefono">Teléfono</option>
                    <option value="seguros">Seguros</option>
                    <option value="alquiler">Alquiler</option>
                    <option value="mantenimiento">Mantenimiento</option>
                    <option value="muebles">Muebles y Electro</option>
                    <option value="suscripciones">Suscripciones</option>
                    <option value="transportePrivado">Transporte Privado</option>
                    <option value="transportePublico">Transporte Público</option>
                    <option value="supermercado">Supermercado</option>
                    <option value="kiosco">Kiosco</option>
                    <option value="cuidado">Cuidado Personal</option>
                    <option value="salud">Salud</option>
                    <option value="indumentaria">Indumentaria</option>
                    <option value="ahorro">Ahorro</option>
                    <option value="inversiones">Inversiones</option>
                    <option value="imprevistos">Imprevistos</option>
                    <option value="familia">Familia</option>
                    <option value="tarjetas">Tarjetas</option>
                    <option value="educacion">Educación</option>
                    <option value="viajes">Viajes</option>
                    <option value="salidas">Salidas</option>
                    <option value="comidas">Comidas</option>
                    <option value="delivery">Delivery</option>
                    <option value="entretenimiento">Entretenimiento</option>
                    <option value="regalos">Regalos</option>
                    <option value="hobbies">Hobbies y Gustos</option>
                    <option value="oficina">Oficina</option>
                </select>
            </label>
            <label>
                Medio de pago:
                <select id="filtroMedioPago">
                    <option value="">Todos</option>
                    <option value="efectivo">Efectivo</option>
                    <option value="tarjetaDebito">Tarjeta Débito</option>
                    <option value="tarjetaCredito">Tarjeta Crédito</option>
                    <option value="otros">Otros</option>
                </select>
            </label>
            <button id="limpiarFiltros">Limpiar filtros</button>
            <div style="margin-left: auto; display:flex; gap:0.6rem; align-items:center;">
                <button id="exportCSV" aria-label="Exportar CSV">Exportar CSV</button>
                <button id="importCSVButton" aria-label="Importar CSV">Importar CSV</button>
                <input id="importCSVInput" type="file" accept=".csv" style="display:none" />
            </div>
        </section>

        <section id="historial">
            <h2>Historial de movimientos</h2>
            <div style="overflow-x: auto;">
                <table>
                    <caption id="tablaMovimientosTitle">Historial de movimientos</caption>
                    <thead>
                        <tr>
                            <th scope="col">Tipo</th>
                            <th scope="col">Categoría</th>
                            <th scope="col">Monto</th>
                            <th scope="col">Medio de pago</th>
                            <th scope="col">Fecha</th>
                            <th scope="col">Descripción</th>
                            <th>Acciones</th>
                        </tr>
                    </thead>
                    <tbody id="tablaMovimientos">
                    </tbody>
                </table>
            </div>

            <div aria-hidden="false" id="chartArea" style="margin-top:1rem;">
                <h3>Gastos por categoría</h3>
                <canvas id="chartCategorias" width="400" height="200"></canvas>
            </div>
        </section>

        <div id="modalConfirm" role="dialog" aria-modal="true" aria-hidden="true">
            <div class="modalContent">
                <p id="modalText">¿Estás seguro?</p>
                <div class="modalActions">
                    <button id="modalCancel">Cancelar</button>
                    <button id="modalConfirmBtn">Confirmar</button>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>Finanzas Personales • 2025 • Jose Vicente Gonzalez Perez</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Load utilities first (no dependencies) -->
    <script src="js/utils.js"></script>
    <!-- Load data functions second (no dependencies) -->
    <script src="js/data.js"></script>
    <!-- Load UI functions third (depends on utils and data) -->
    <script src="js/ui.js"></script>
    <!-- Load main last (event listeners depend on everything) -->
    <script src="js/main.js"></script>
</body>
</html>